!function a(i,c,u){function l(t,e){if(!c[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(f)return f(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=c[t]={exports:{}};i[t][0].call(o.exports,function(e){return l(i[t][1][e]||e)},o,o.exports,a,i,c,u)}return c[t].exports}for(var f="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("./shared/dom"))&&r.__esModule?r:{default:r};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=document.querySelector("body");document.querySelector(".page");o.default.detect(e),e.classList.add("ready")}}])&&a(t.prototype,n),r&&a(t,r),e}(),c=new(n.default=i);window.onload=function(){c.init()}},{"./shared/dom":2}],2:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function m(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m)}var e,t,n;return e=m,n=[{key:"detect",value:function(r){var e=navigator.userAgent.toLowerCase(),t=-1<e.indexOf("msie"),n=-1<e.indexOf("firefox"),o=-1<e.toLowerCase().indexOf("op"),a=-1<e.indexOf("chrome"),i=-1<e.indexOf("safari");a&&i&&(i=!1),a&&o&&(a=!1);var c=e.match(/android/i),u=e.match(/blackberry/i),l=e.match(/iphone|ipad|ipod/i),f=e.match(/opera mini/i),s=e.match(/iemobile/i)||navigator.userAgent.match(/wpdesktop/i),d={chrome:a,explorer:t,firefox:n,safari:i,opera:o,android:c,blackberry:u,ios:l,operamini:f,iemobile:s,mobile:c||u||l||f||s,overscroll:"MacIntel"===navigator.platform&&"function"==typeof navigator.getBattery};Object.assign(m,d),Object.keys(d).forEach(function(e){d[e]&&r.classList.add(e)});document.addEventListener("touchstart",function e(){document.removeEventListener("touchstart",e),m.touch=!0,r.classList.add("touch")});document.addEventListener("mousedown",function e(){document.removeEventListener("mousedown",e),m.mouse=!0,r.classList.add("mouse")});document.addEventListener("scroll",function e(){var t=Utils.now();if(m.lastScrollTime){var n=t-m.lastScrollTime;n<5&&(document.removeEventListener("scroll",e),m.fastscroll=!0,r.classList.add("fastscroll"),console.log("scroll",n))}m.lastScrollTime=t})}},{key:"fragmentFirstElement",value:function(e){return Array.prototype.slice.call(e.children).find(function(e){return e.nodeType===Node.ELEMENT_NODE})}},{key:"fragmentFromHTML",value:function(e){return document.createRange().createContextualFragment(e)}},{key:"scrollTop",value:function(){return document&&document.defaultView?document.defaultView.pageYOffset:0}}],(t=null)&&r(e.prototype,t),n&&r(e,n),m}();n.default=o},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRvY3MvanMvYXBwLmpzIl0sIm5hbWVzIjpbInIiLCJlIiwibiIsInQiLCJvIiwiaSIsImYiLCJjIiwicmVxdWlyZSIsInUiLCJhIiwiRXJyb3IiLCJjb2RlIiwicCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJkZWZhdWx0Iiwib2JqIiwiX2RvbSIsIl9fZXNNb2R1bGUiLCJfZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImtleSIsIkFwcCIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiYm9keSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImRldGVjdCIsImNsYXNzTGlzdCIsImFkZCIsInByb3RvdHlwZSIsImFwcCIsIndpbmRvdyIsIm9ubG9hZCIsImluaXQiLCIuL3NoYXJlZC9kb20iLCIyIiwiRG9tIiwibm9kZSIsInVzZXJBZ2VudCIsIm5hdmlnYXRvciIsInRvTG93ZXJDYXNlIiwiZXhwbG9yZXIiLCJpbmRleE9mIiwiZmlyZWZveCIsIm9wZXJhIiwiY2hyb21lIiwic2FmYXJpIiwiYW5kcm9pZCIsIm1hdGNoIiwiYmxhY2tiZXJyeSIsImlvcyIsIm9wZXJhbWluaSIsImllbW9iaWxlIiwibW9iaWxlIiwib3ZlcnNjcm9sbCIsInBsYXRmb3JtIiwiZ2V0QmF0dGVyeSIsImFzc2lnbiIsImtleXMiLCJmb3JFYWNoIiwieCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvblRvdWNoU3RhcnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwidG91Y2giLCJvbk1vdXNlRG93biIsIm1vdXNlIiwib25TY3JvbGwiLCJub3ciLCJVdGlscyIsImxhc3RTY3JvbGxUaW1lIiwiZGlmZiIsImZhc3RzY3JvbGwiLCJjb25zb2xlIiwibG9nIiwiZnJhZ21lbnQiLCJBcnJheSIsInNsaWNlIiwiY2hpbGRyZW4iLCJmaW5kIiwibm9kZVR5cGUiLCJOb2RlIiwiRUxFTUVOVF9OT0RFIiwiaHRtbCIsImNyZWF0ZVJhbmdlIiwiY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50IiwiZGVmYXVsdFZpZXciLCJwYWdlWU9mZnNldCJdLCJtYXBwaW5ncyI6IkNBQVksU0FBU0EsRUFBRUMsRUFBRUMsRUFBRUMsR0FBRyxTQUFTQyxFQUFFQyxFQUFFQyxHQUFHLElBQUlKLEVBQUVHLEdBQUcsQ0FBQyxJQUFJSixFQUFFSSxHQUFHLENBQUMsSUFBSUUsRUFBRSxtQkFBbUJDLFNBQVNBLFFBQVEsSUFBSUYsR0FBR0MsRUFBRSxPQUFPQSxFQUFFRixHQUFFLEdBQUksR0FBR0ksRUFBRSxPQUFPQSxFQUFFSixHQUFFLEdBQUksSUFBSUssRUFBRSxJQUFJQyxNQUFNLHVCQUF1Qk4sRUFBRSxLQUFLLE1BQU1LLEVBQUVFLEtBQUssbUJBQW1CRixFQUFFLElBQUlHLEVBQUVYLEVBQUVHLEdBQUcsQ0FBQ1MsUUFBUSxJQUFJYixFQUFFSSxHQUFHLEdBQUdVLEtBQUtGLEVBQUVDLFFBQVEsU0FBU2QsR0FBb0IsT0FBT0ksRUFBbEJILEVBQUVJLEdBQUcsR0FBR0wsSUFBZUEsSUFBSWEsRUFBRUEsRUFBRUMsUUFBUWQsRUFBRUMsRUFBRUMsRUFBRUMsR0FBRyxPQUFPRCxFQUFFRyxHQUFHUyxRQUFRLElBQUksSUFBSUwsRUFBRSxtQkFBbUJELFNBQVNBLFFBQVFILEVBQUUsRUFBRUEsRUFBRUYsRUFBRWEsT0FBT1gsSUFBSUQsRUFBRUQsRUFBRUUsSUFBSSxPQUFPRCxFQUE3YixDQUE0YyxDQUFDYSxFQUFFLENBQUMsU0FBU1QsRUFBUVUsRUFBT0osR0FDeGUsYUFFQUssT0FBT0MsZUFBZU4sRUFBUyxhQUFjLENBQzNDTyxPQUFPLElBRVRQLEVBQVFRLGFBQVUsRUFFbEIsSUFFZ0NDLEVBRjVCQyxHQUU0QkQsRUFGRWYsRUFBUSxrQkFFV2UsRUFBSUUsV0FBYUYsRUFBTSxDQUFFRCxRQUFTQyxHQUl2RixTQUFTRyxFQUFrQkMsRUFBUUMsR0FBUyxJQUFLLElBQUl2QixFQUFJLEVBQUdBLEVBQUl1QixFQUFNWixPQUFRWCxJQUFLLENBQUUsSUFBSXdCLEVBQWFELEVBQU12QixHQUFJd0IsRUFBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsVUFBV0YsSUFBWUEsRUFBV0csVUFBVyxHQUFNYixPQUFPQyxlQUFlTyxFQUFRRSxFQUFXSSxJQUFLSixJQUk3UyxJQUFJSyxFQUVKLFdBQ0UsU0FBU0EsS0FUWCxTQUF5QkMsRUFBVUMsR0FBZSxLQUFNRCxhQUFvQkMsR0FBZ0IsTUFBTSxJQUFJQyxVQUFVLHFDQVU1R0MsQ0FBZ0JDLEtBQU1MLEdBTjFCLElBQXNCRSxFQUFhSSxFQUFZQyxFQXFCN0MsT0FyQm9CTCxFQVNQRixHQVRvQk0sRUFTZixDQUFDLENBQ2pCUCxJQUFLLE9BQ0xaLE1BQU8sV0FDTCxJQUFJcUIsRUFBT0MsU0FBU0MsY0FBYyxRQUN2QkQsU0FBU0MsY0FBYyxTQUVsQ3BCLEVBQUtGLFFBQVF1QixPQUFPSCxHQUVwQkEsRUFBS0ksVUFBVUMsSUFBSSxjQWpCcURyQixFQUFrQlUsRUFBWVksVUFBV1IsR0FBaUJDLEdBQWFmLEVBQWtCVSxFQUFhSyxHQXFCM0tQLEVBakJULEdBcUJJZSxFQUFNLElBRFZuQyxFQUFRUSxRQUFVWSxHQUdsQmdCLE9BQU9DLE9BQVMsV0FDZEYsRUFBSUcsU0FHSixDQUFDQyxlQUFlLElBQUlDLEVBQUUsQ0FBQyxTQUFTOUMsRUFBUVUsRUFBT0osR0FDakQsYUFTQSxTQUFTWSxFQUFrQkMsRUFBUUMsR0FBUyxJQUFLLElBQUl2QixFQUFJLEVBQUdBLEVBQUl1QixFQUFNWixPQUFRWCxJQUFLLENBQUUsSUFBSXdCLEVBQWFELEVBQU12QixHQUFJd0IsRUFBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsVUFBV0YsSUFBWUEsRUFBV0csVUFBVyxHQUFNYixPQUFPQyxlQUFlTyxFQUFRRSxFQUFXSSxJQUFLSixJQVA3U1YsT0FBT0MsZUFBZU4sRUFBUyxhQUFjLENBQzNDTyxPQUFPLElBRVRQLEVBQVFRLGFBQVUsRUFTbEIsSUFBSWlDLEVBRUosV0FDRSxTQUFTQSxLQVZYLFNBQXlCcEIsRUFBVUMsR0FBZSxLQUFNRCxhQUFvQkMsR0FBZ0IsTUFBTSxJQUFJQyxVQUFVLHFDQVc1R0MsQ0FBZ0JDLEtBQU1nQixHQVAxQixJQUFzQm5CLEVBQWFJLEVBQVlDLEVBOEc3QyxPQTlHb0JMLEVBVVBtQixFQVZnQ2QsRUFVckIsQ0FBQyxDQUN2QlIsSUFBSyxTQUNMWixNQUFPLFNBQWdCbUMsR0FDckIsSUFBSUMsRUFBWUMsVUFBVUQsVUFBVUUsY0FDaENDLEdBQXdDLEVBQTdCSCxFQUFVSSxRQUFRLFFBQzdCQyxHQUEwQyxFQUFoQ0wsRUFBVUksUUFBUSxXQUM1QkUsR0FBaUQsRUFBekNOLEVBQVVFLGNBQWNFLFFBQVEsTUFDeENHLEdBQXdDLEVBQS9CUCxFQUFVSSxRQUFRLFVBQzNCSSxHQUF3QyxFQUEvQlIsRUFBVUksUUFBUSxVQUUzQkcsR0FBVUMsSUFDWkEsR0FBUyxHQUdQRCxHQUFVRCxJQUNaQyxHQUFTLEdBR1gsSUFBSUUsRUFBVVQsRUFBVVUsTUFBTSxZQUMxQkMsRUFBYVgsRUFBVVUsTUFBTSxlQUM3QkUsRUFBTVosRUFBVVUsTUFBTSxxQkFDdEJHLEVBQVliLEVBQVVVLE1BQU0sZUFDNUJJLEVBQVdkLEVBQVVVLE1BQU0sY0FBZ0JULFVBQVVELFVBQVVVLE1BQU0sY0FHckVyQixFQUFZLENBQ2RrQixPQUFRQSxFQUNSSixTQUFVQSxFQUNWRSxRQUFTQSxFQUNURyxPQUFRQSxFQUNSRixNQUFPQSxFQUNQRyxRQUFTQSxFQUNURSxXQUFZQSxFQUNaQyxJQUFLQSxFQUNMQyxVQUFXQSxFQUNYQyxTQUFVQSxFQUNWQyxPQWJXTixHQUFXRSxHQUFjQyxHQUFPQyxHQUFhQyxFQWN4REUsV0Fic0MsYUFBdkJmLFVBQVVnQixVQUEyRCxtQkFBekJoQixVQUFVaUIsWUFldkV4RCxPQUFPeUQsT0FBT3JCLEVBQUtULEdBQ25CM0IsT0FBTzBELEtBQUsvQixHQUFXZ0MsUUFBUSxTQUFVQyxHQUNuQ2pDLEVBQVVpQyxJQUNadkIsRUFBS1YsVUFBVUMsSUFBSWdDLEtBVXZCcEMsU0FBU3FDLGlCQUFpQixhQU5QLFNBQVNDLElBQzFCdEMsU0FBU3VDLG9CQUFvQixhQUFjRCxHQUMzQzFCLEVBQUk0QixPQUFRLEVBQ1ozQixFQUFLVixVQUFVQyxJQUFJLFdBV3JCSixTQUFTcUMsaUJBQWlCLFlBTlIsU0FBU0ksSUFDekJ6QyxTQUFTdUMsb0JBQW9CLFlBQWFFLEdBQzFDN0IsRUFBSThCLE9BQVEsRUFDWjdCLEVBQUtWLFVBQVVDLElBQUksV0FzQnJCSixTQUFTcUMsaUJBQWlCLFNBakJYLFNBQVNNLElBQ3RCLElBQUlDLEVBQU1DLE1BQU1ELE1BRWhCLEdBQUloQyxFQUFJa0MsZUFBZ0IsQ0FDdEIsSUFBSUMsRUFBT0gsRUFBTWhDLEVBQUlrQyxlQUVqQkMsRUFBTyxJQUNUL0MsU0FBU3VDLG9CQUFvQixTQUFVSSxHQUN2Qy9CLEVBQUlvQyxZQUFhLEVBQ2pCbkMsRUFBS1YsVUFBVUMsSUFBSSxjQUNuQjZDLFFBQVFDLElBQUksU0FBVUgsSUFJMUJuQyxFQUFJa0MsZUFBaUJGLE1BS3hCLENBQ0R0RCxJQUFLLHVCQUNMWixNQUFPLFNBQThCeUUsR0FDbkMsT0FBT0MsTUFBTS9DLFVBQVVnRCxNQUFNakYsS0FBSytFLEVBQVNHLFVBQVVDLEtBQUssU0FBVW5CLEdBQ2xFLE9BQU9BLEVBQUVvQixXQUFhQyxLQUFLQyxpQkFHOUIsQ0FDRHBFLElBQUssbUJBQ0xaLE1BQU8sU0FBMEJpRixHQUMvQixPQUFPM0QsU0FBUzRELGNBQWNDLHlCQUF5QkYsS0FFeEQsQ0FDRHJFLElBQUssWUFDTFosTUFBTyxXQUNMLE9BQU9zQixVQUFZQSxTQUFTOEQsWUFBYzlELFNBQVM4RCxZQUFZQyxZQUFjLE1BMUdoRGxFLEVBVWYsT0FWMERkLEVBQWtCVSxFQUFZWSxVQUFXUixHQUFpQkMsR0FBYWYsRUFBa0JVLEVBQWFLLEdBOEczS2MsRUF6R1QsR0E0R0F6QyxFQUFRUSxRQUFVaUMsR0FFaEIsS0FBSyxHQUFHLENBQUMiLCJmaWxlIjoiZG9jcy9qcy9hcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIF9kb20gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3NoYXJlZC9kb21cIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbnZhciBBcHAgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBBcHAoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFwcCk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQXBwLCBbe1xuICAgIGtleTogXCJpbml0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICB2YXIgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbiAgICAgIHZhciBwYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2UnKTtcblxuICAgICAgX2RvbS5kZWZhdWx0LmRldGVjdChib2R5KTtcblxuICAgICAgYm9keS5jbGFzc0xpc3QuYWRkKCdyZWFkeScpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBBcHA7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IEFwcDtcbnZhciBhcHAgPSBuZXcgQXBwKCk7XG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gIGFwcC5pbml0KCk7XG59O1xuXG59LHtcIi4vc2hhcmVkL2RvbVwiOjJ9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cbnZhciBEb20gPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBEb20oKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERvbSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRG9tLCBudWxsLCBbe1xuICAgIGtleTogXCJkZXRlY3RcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZGV0ZWN0KG5vZGUpIHtcbiAgICAgIHZhciB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICB2YXIgZXhwbG9yZXIgPSB1c2VyQWdlbnQuaW5kZXhPZignbXNpZScpID4gLTE7XG4gICAgICB2YXIgZmlyZWZveCA9IHVzZXJBZ2VudC5pbmRleE9mKCdmaXJlZm94JykgPiAtMTtcbiAgICAgIHZhciBvcGVyYSA9IHVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ29wJykgPiAtMTtcbiAgICAgIHZhciBjaHJvbWUgPSB1c2VyQWdlbnQuaW5kZXhPZignY2hyb21lJykgPiAtMTtcbiAgICAgIHZhciBzYWZhcmkgPSB1c2VyQWdlbnQuaW5kZXhPZignc2FmYXJpJykgPiAtMTtcblxuICAgICAgaWYgKGNocm9tZSAmJiBzYWZhcmkpIHtcbiAgICAgICAgc2FmYXJpID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaHJvbWUgJiYgb3BlcmEpIHtcbiAgICAgICAgY2hyb21lID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBhbmRyb2lkID0gdXNlckFnZW50Lm1hdGNoKC9hbmRyb2lkL2kpO1xuICAgICAgdmFyIGJsYWNrYmVycnkgPSB1c2VyQWdlbnQubWF0Y2goL2JsYWNrYmVycnkvaSk7XG4gICAgICB2YXIgaW9zID0gdXNlckFnZW50Lm1hdGNoKC9pcGhvbmV8aXBhZHxpcG9kL2kpO1xuICAgICAgdmFyIG9wZXJhbWluaSA9IHVzZXJBZ2VudC5tYXRjaCgvb3BlcmEgbWluaS9pKTtcbiAgICAgIHZhciBpZW1vYmlsZSA9IHVzZXJBZ2VudC5tYXRjaCgvaWVtb2JpbGUvaSkgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvd3BkZXNrdG9wL2kpO1xuICAgICAgdmFyIG1vYmlsZSA9IGFuZHJvaWQgfHwgYmxhY2tiZXJyeSB8fCBpb3MgfHwgb3BlcmFtaW5pIHx8IGllbW9iaWxlO1xuICAgICAgdmFyIG92ZXJzY3JvbGwgPSBuYXZpZ2F0b3IucGxhdGZvcm0gPT09ICdNYWNJbnRlbCcgJiYgdHlwZW9mIG5hdmlnYXRvci5nZXRCYXR0ZXJ5ID09PSAnZnVuY3Rpb24nO1xuICAgICAgdmFyIGNsYXNzTGlzdCA9IHtcbiAgICAgICAgY2hyb21lOiBjaHJvbWUsXG4gICAgICAgIGV4cGxvcmVyOiBleHBsb3JlcixcbiAgICAgICAgZmlyZWZveDogZmlyZWZveCxcbiAgICAgICAgc2FmYXJpOiBzYWZhcmksXG4gICAgICAgIG9wZXJhOiBvcGVyYSxcbiAgICAgICAgYW5kcm9pZDogYW5kcm9pZCxcbiAgICAgICAgYmxhY2tiZXJyeTogYmxhY2tiZXJyeSxcbiAgICAgICAgaW9zOiBpb3MsXG4gICAgICAgIG9wZXJhbWluaTogb3BlcmFtaW5pLFxuICAgICAgICBpZW1vYmlsZTogaWVtb2JpbGUsXG4gICAgICAgIG1vYmlsZTogbW9iaWxlLFxuICAgICAgICBvdmVyc2Nyb2xsOiBvdmVyc2Nyb2xsXG4gICAgICB9O1xuICAgICAgT2JqZWN0LmFzc2lnbihEb20sIGNsYXNzTGlzdCk7XG4gICAgICBPYmplY3Qua2V5cyhjbGFzc0xpc3QpLmZvckVhY2goZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgaWYgKGNsYXNzTGlzdFt4XSkge1xuICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCh4KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHZhciBvblRvdWNoU3RhcnQgPSBmdW5jdGlvbiBvblRvdWNoU3RhcnQoKSB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblRvdWNoU3RhcnQpO1xuICAgICAgICBEb20udG91Y2ggPSB0cnVlO1xuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ3RvdWNoJyk7XG4gICAgICB9O1xuXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Ub3VjaFN0YXJ0KTtcblxuICAgICAgdmFyIG9uTW91c2VEb3duID0gZnVuY3Rpb24gb25Nb3VzZURvd24oKSB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uTW91c2VEb3duKTtcbiAgICAgICAgRG9tLm1vdXNlID0gdHJ1ZTtcbiAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdtb3VzZScpO1xuICAgICAgfTtcblxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Nb3VzZURvd24pO1xuXG4gICAgICB2YXIgb25TY3JvbGwgPSBmdW5jdGlvbiBvblNjcm9sbCgpIHtcbiAgICAgICAgdmFyIG5vdyA9IFV0aWxzLm5vdygpO1xuXG4gICAgICAgIGlmIChEb20ubGFzdFNjcm9sbFRpbWUpIHtcbiAgICAgICAgICB2YXIgZGlmZiA9IG5vdyAtIERvbS5sYXN0U2Nyb2xsVGltZTtcblxuICAgICAgICAgIGlmIChkaWZmIDwgNSkge1xuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgb25TY3JvbGwpO1xuICAgICAgICAgICAgRG9tLmZhc3RzY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdmYXN0c2Nyb2xsJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2Nyb2xsJywgZGlmZik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgRG9tLmxhc3RTY3JvbGxUaW1lID0gbm93O1xuICAgICAgfTtcblxuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgb25TY3JvbGwpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJmcmFnbWVudEZpcnN0RWxlbWVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmcmFnbWVudEZpcnN0RWxlbWVudChmcmFnbWVudCkge1xuICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyYWdtZW50LmNoaWxkcmVuKS5maW5kKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHJldHVybiB4Lm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJmcmFnbWVudEZyb21IVE1MXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZyYWdtZW50RnJvbUhUTUwoaHRtbCkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVJhbmdlKCkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGh0bWwpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJzY3JvbGxUb3BcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2Nyb2xsVG9wKCkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50ICYmIGRvY3VtZW50LmRlZmF1bHRWaWV3ID8gZG9jdW1lbnQuZGVmYXVsdFZpZXcucGFnZVlPZmZzZXQgOiAwO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEb207XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IERvbTtcblxufSx7fV19LHt9LFsxXSk7XG5cbiJdfQ==