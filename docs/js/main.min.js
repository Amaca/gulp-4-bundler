!function a(i,c,u){function l(t,e){if(!c[t]){if(!i[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(f)return f(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=c[t]={exports:{}};i[t][0].call(o.exports,function(e){return l(i[t][1][e]||e)},o,o.exports,a,i,c,u)}return c[t].exports}for(var f="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("./shared/dom"))&&r.__esModule?r:{default:r};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=document.querySelector("body");document.querySelector(".page");o.default.detect(e),e.classList.add("ready")}}])&&a(t.prototype,n),r&&a(t,r),e}(),c=new(n.default=i);window.onload=function(){c.init()}},{"./shared/dom":2}],2:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function m(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m)}var e,t,n;return e=m,n=[{key:"detect",value:function(r){var e=navigator.userAgent.toLowerCase(),t=-1<e.indexOf("msie"),n=-1<e.indexOf("firefox"),o=-1<e.toLowerCase().indexOf("op"),a=-1<e.indexOf("chrome"),i=-1<e.indexOf("safari");a&&i&&(i=!1),a&&o&&(a=!1);var c=e.match(/android/i),u=e.match(/blackberry/i),l=e.match(/iphone|ipad|ipod/i),f=e.match(/opera mini/i),s=e.match(/iemobile/i)||navigator.userAgent.match(/wpdesktop/i),d={chrome:a,explorer:t,firefox:n,safari:i,opera:o,android:c,blackberry:u,ios:l,operamini:f,iemobile:s,mobile:c||u||l||f||s,overscroll:"MacIntel"===navigator.platform&&"function"==typeof navigator.getBattery};Object.assign(m,d),Object.keys(d).forEach(function(e){d[e]&&r.classList.add(e)});document.addEventListener("touchstart",function e(){document.removeEventListener("touchstart",e),m.touch=!0,r.classList.add("touch")});document.addEventListener("mousedown",function e(){document.removeEventListener("mousedown",e),m.mouse=!0,r.classList.add("mouse")});document.addEventListener("scroll",function e(){var t=Utils.now();if(m.lastScrollTime){var n=t-m.lastScrollTime;n<5&&(document.removeEventListener("scroll",e),m.fastscroll=!0,r.classList.add("fastscroll"),console.log("scroll",n))}m.lastScrollTime=t})}},{key:"fragmentFirstElement",value:function(e){return Array.prototype.slice.call(e.children).find(function(e){return e.nodeType===Node.ELEMENT_NODE})}},{key:"fragmentFromHTML",value:function(e){return document.createRange().createContextualFragment(e)}},{key:"scrollTop",value:function(){return document&&document.defaultView?document.defaultView.pageYOffset:0}}],(t=null)&&r(e.prototype,t),n&&r(e,n),m}();n.default=o},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRvY3MvanMvbWFpbi5qcyJdLCJuYW1lcyI6WyJyIiwiZSIsIm4iLCJ0IiwibyIsImkiLCJmIiwiYyIsInJlcXVpcmUiLCJ1IiwiYSIsIkVycm9yIiwiY29kZSIsInAiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiZGVmYXVsdCIsIm9iaiIsIl9kb20iLCJfX2VzTW9kdWxlIiwiX2RlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJrZXkiLCJBcHAiLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsImJvZHkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJkZXRlY3QiLCJjbGFzc0xpc3QiLCJhZGQiLCJwcm90b3R5cGUiLCJhcHAiLCJ3aW5kb3ciLCJvbmxvYWQiLCJpbml0IiwiLi9zaGFyZWQvZG9tIiwiMiIsIkRvbSIsIm5vZGUiLCJ1c2VyQWdlbnQiLCJuYXZpZ2F0b3IiLCJ0b0xvd2VyQ2FzZSIsImV4cGxvcmVyIiwiaW5kZXhPZiIsImZpcmVmb3giLCJvcGVyYSIsImNocm9tZSIsInNhZmFyaSIsImFuZHJvaWQiLCJtYXRjaCIsImJsYWNrYmVycnkiLCJpb3MiLCJvcGVyYW1pbmkiLCJpZW1vYmlsZSIsIm1vYmlsZSIsIm92ZXJzY3JvbGwiLCJwbGF0Zm9ybSIsImdldEJhdHRlcnkiLCJhc3NpZ24iLCJrZXlzIiwiZm9yRWFjaCIsIngiLCJhZGRFdmVudExpc3RlbmVyIiwib25Ub3VjaFN0YXJ0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRvdWNoIiwib25Nb3VzZURvd24iLCJtb3VzZSIsIm9uU2Nyb2xsIiwibm93IiwiVXRpbHMiLCJsYXN0U2Nyb2xsVGltZSIsImRpZmYiLCJmYXN0c2Nyb2xsIiwiY29uc29sZSIsImxvZyIsImZyYWdtZW50IiwiQXJyYXkiLCJzbGljZSIsImNoaWxkcmVuIiwiZmluZCIsIm5vZGVUeXBlIiwiTm9kZSIsIkVMRU1FTlRfTk9ERSIsImh0bWwiLCJjcmVhdGVSYW5nZSIsImNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCIsImRlZmF1bHRWaWV3IiwicGFnZVlPZmZzZXQiXSwibWFwcGluZ3MiOiJDQUFZLFNBQVNBLEVBQUVDLEVBQUVDLEVBQUVDLEdBQUcsU0FBU0MsRUFBRUMsRUFBRUMsR0FBRyxJQUFJSixFQUFFRyxHQUFHLENBQUMsSUFBSUosRUFBRUksR0FBRyxDQUFDLElBQUlFLEVBQUUsbUJBQW1CQyxTQUFTQSxRQUFRLElBQUlGLEdBQUdDLEVBQUUsT0FBT0EsRUFBRUYsR0FBRSxHQUFJLEdBQUdJLEVBQUUsT0FBT0EsRUFBRUosR0FBRSxHQUFJLElBQUlLLEVBQUUsSUFBSUMsTUFBTSx1QkFBdUJOLEVBQUUsS0FBSyxNQUFNSyxFQUFFRSxLQUFLLG1CQUFtQkYsRUFBRSxJQUFJRyxFQUFFWCxFQUFFRyxHQUFHLENBQUNTLFFBQVEsSUFBSWIsRUFBRUksR0FBRyxHQUFHVSxLQUFLRixFQUFFQyxRQUFRLFNBQVNkLEdBQW9CLE9BQU9JLEVBQWxCSCxFQUFFSSxHQUFHLEdBQUdMLElBQWVBLElBQUlhLEVBQUVBLEVBQUVDLFFBQVFkLEVBQUVDLEVBQUVDLEVBQUVDLEdBQUcsT0FBT0QsRUFBRUcsR0FBR1MsUUFBUSxJQUFJLElBQUlMLEVBQUUsbUJBQW1CRCxTQUFTQSxRQUFRSCxFQUFFLEVBQUVBLEVBQUVGLEVBQUVhLE9BQU9YLElBQUlELEVBQUVELEVBQUVFLElBQUksT0FBT0QsRUFBN2IsQ0FBNGMsQ0FBQ2EsRUFBRSxDQUFDLFNBQVNULEVBQVFVLEVBQU9KLEdBQ3hlLGFBRUFLLE9BQU9DLGVBQWVOLEVBQVMsYUFBYyxDQUMzQ08sT0FBTyxJQUVUUCxFQUFRUSxhQUFVLEVBRWxCLElBRWdDQyxF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VjBEZCxFQUFrQlUsRUFBWVksVUFBV1IsR0FBaUJDLEdBQWFmLEVBQWtCVSxFQUFhSyxHQThHM0tjLEVBekdULEdBNEdBekMsRUFBUVEsUUFBVWlDLEdBRWhCLEtBQUssR0FBRyxDQUFDIiwiZmlsZSI6ImRvY3MvanMvbWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX2RvbSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vc2hhcmVkL2RvbVwiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxudmFyIEFwcCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEFwcCgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXBwKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhBcHAsIFt7XG4gICAga2V5OiBcImluaXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuICAgICAgdmFyIHBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZScpO1xuXG4gICAgICBfZG9tLmRlZmF1bHQuZGV0ZWN0KGJvZHkpO1xuXG4gICAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ3JlYWR5Jyk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEFwcDtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQXBwO1xudmFyIGFwcCA9IG5ldyBBcHAoKTtcblxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgYXBwLmluaXQoKTtcbn07XG5cbn0se1wiLi9zaGFyZWQvZG9tXCI6Mn1dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xudmFyIERvbSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIERvbSgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRG9tKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhEb20sIG51bGwsIFt7XG4gICAga2V5OiBcImRldGVjdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkZXRlY3Qobm9kZSkge1xuICAgICAgdmFyIHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgIHZhciBleHBsb3JlciA9IHVzZXJBZ2VudC5pbmRleE9mKCdtc2llJykgPiAtMTtcbiAgICAgIHZhciBmaXJlZm94ID0gdXNlckFnZW50LmluZGV4T2YoJ2ZpcmVmb3gnKSA+IC0xO1xuICAgICAgdmFyIG9wZXJhID0gdXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZignb3AnKSA+IC0xO1xuICAgICAgdmFyIGNocm9tZSA9IHVzZXJBZ2VudC5pbmRleE9mKCdjaHJvbWUnKSA+IC0xO1xuICAgICAgdmFyIHNhZmFyaSA9IHVzZXJBZ2VudC5pbmRleE9mKCdzYWZhcmknKSA+IC0xO1xuXG4gICAgICBpZiAoY2hyb21lICYmIHNhZmFyaSkge1xuICAgICAgICBzYWZhcmkgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNocm9tZSAmJiBvcGVyYSkge1xuICAgICAgICBjaHJvbWUgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGFuZHJvaWQgPSB1c2VyQWdlbnQubWF0Y2goL2FuZHJvaWQvaSk7XG4gICAgICB2YXIgYmxhY2tiZXJyeSA9IHVzZXJBZ2VudC5tYXRjaCgvYmxhY2tiZXJyeS9pKTtcbiAgICAgIHZhciBpb3MgPSB1c2VyQWdlbnQubWF0Y2goL2lwaG9uZXxpcGFkfGlwb2QvaSk7XG4gICAgICB2YXIgb3BlcmFtaW5pID0gdXNlckFnZW50Lm1hdGNoKC9vcGVyYSBtaW5pL2kpO1xuICAgICAgdmFyIGllbW9iaWxlID0gdXNlckFnZW50Lm1hdGNoKC9pZW1vYmlsZS9pKSB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC93cGRlc2t0b3AvaSk7XG4gICAgICB2YXIgbW9iaWxlID0gYW5kcm9pZCB8fCBibGFja2JlcnJ5IHx8IGlvcyB8fCBvcGVyYW1pbmkgfHwgaWVtb2JpbGU7XG4gICAgICB2YXIgb3ZlcnNjcm9sbCA9IG5hdmlnYXRvci5wbGF0Zm9ybSA9PT0gJ01hY0ludGVsJyAmJiB0eXBlb2YgbmF2aWdhdG9yLmdldEJhdHRlcnkgPT09ICdmdW5jdGlvbic7XG4gICAgICB2YXIgY2xhc3NMaXN0ID0ge1xuICAgICAgICBjaHJvbWU6IGNocm9tZSxcbiAgICAgICAgZXhwbG9yZXI6IGV4cGxvcmVyLFxuICAgICAgICBmaXJlZm94OiBmaXJlZm94LFxuICAgICAgICBzYWZhcmk6IHNhZmFyaSxcbiAgICAgICAgb3BlcmE6IG9wZXJhLFxuICAgICAgICBhbmRyb2lkOiBhbmRyb2lkLFxuICAgICAgICBibGFja2JlcnJ5OiBibGFja2JlcnJ5LFxuICAgICAgICBpb3M6IGlvcyxcbiAgICAgICAgb3BlcmFtaW5pOiBvcGVyYW1pbmksXG4gICAgICAgIGllbW9iaWxlOiBpZW1vYmlsZSxcbiAgICAgICAgbW9iaWxlOiBtb2JpbGUsXG4gICAgICAgIG92ZXJzY3JvbGw6IG92ZXJzY3JvbGxcbiAgICAgIH07XG4gICAgICBPYmplY3QuYXNzaWduKERvbSwgY2xhc3NMaXN0KTtcbiAgICAgIE9iamVjdC5rZXlzKGNsYXNzTGlzdCkuZm9yRWFjaChmdW5jdGlvbiAoeCkge1xuICAgICAgICBpZiAoY2xhc3NMaXN0W3hdKSB7XG4gICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKHgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdmFyIG9uVG91Y2hTdGFydCA9IGZ1bmN0aW9uIG9uVG91Y2hTdGFydCgpIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG9uVG91Y2hTdGFydCk7XG4gICAgICAgIERvbS50b3VjaCA9IHRydWU7XG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgndG91Y2gnKTtcbiAgICAgIH07XG5cbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvblRvdWNoU3RhcnQpO1xuXG4gICAgICB2YXIgb25Nb3VzZURvd24gPSBmdW5jdGlvbiBvbk1vdXNlRG93bigpIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Nb3VzZURvd24pO1xuICAgICAgICBEb20ubW91c2UgPSB0cnVlO1xuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ21vdXNlJyk7XG4gICAgICB9O1xuXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbk1vdXNlRG93bik7XG5cbiAgICAgIHZhciBvblNjcm9sbCA9IGZ1bmN0aW9uIG9uU2Nyb2xsKCkge1xuICAgICAgICB2YXIgbm93ID0gVXRpbHMubm93KCk7XG5cbiAgICAgICAgaWYgKERvbS5sYXN0U2Nyb2xsVGltZSkge1xuICAgICAgICAgIHZhciBkaWZmID0gbm93IC0gRG9tLmxhc3RTY3JvbGxUaW1lO1xuXG4gICAgICAgICAgaWYgKGRpZmYgPCA1KSB7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBvblNjcm9sbCk7XG4gICAgICAgICAgICBEb20uZmFzdHNjcm9sbCA9IHRydWU7XG4gICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ2Zhc3RzY3JvbGwnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzY3JvbGwnLCBkaWZmKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBEb20ubGFzdFNjcm9sbFRpbWUgPSBub3c7XG4gICAgICB9O1xuXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBvblNjcm9sbCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImZyYWdtZW50Rmlyc3RFbGVtZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGZyYWdtZW50Rmlyc3RFbGVtZW50KGZyYWdtZW50KSB7XG4gICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJhZ21lbnQuY2hpbGRyZW4pLmZpbmQoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgcmV0dXJuIHgubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImZyYWdtZW50RnJvbUhUTUxcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZnJhZ21lbnRGcm9tSFRNTChodG1sKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoaHRtbCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNjcm9sbFRvcFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzY3JvbGxUb3AoKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQgJiYgZG9jdW1lbnQuZGVmYXVsdFZpZXcgPyBkb2N1bWVudC5kZWZhdWx0Vmlldy5wYWdlWU9mZnNldCA6IDA7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIERvbTtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gRG9tO1xuXG59LHt9XX0se30sWzFdKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lJaXdpYzI5MWNtTmxjeUk2V3lKemNtTXZhbk12YldGcGJpNXFjeUpkTENKemIzVnlZMlZ6UTI5dWRHVnVkQ0k2V3lJdktpQnFjMmhwYm5RZ1pYTjJaWEp6YVc5dU9pQTJJQ292WEc0dktpQm5iRzlpWVd3Z2QybHVaRzkzTENCa2IyTjFiV1Z1ZEN3Z1UzZHBjR1Z5TENCVWQyVmxiazFoZUN3Z1ZHbHRaV3hwYm1WTllYZ2dLaTljYmx4dWFXMXdiM0owSUVSdmJTQm1jbTl0SUNjdUwzTm9ZWEpsWkM5a2IyMG5PMXh1WEc1bGVIQnZjblFnWkdWbVlYVnNkQ0JqYkdGemN5QkJjSEFnZTF4dVhHNGdJQ0FnWTI5dWMzUnlkV04wYjNJb0tTQjdmVnh1WEc0Z0lDQWdhVzVwZENncElIdGNiaUFnSUNBZ0lDQWdZMjl1YzNRZ1ltOWtlU0E5SUdSdlkzVnRaVzUwTG5GMVpYSjVVMlZzWldOMGIzSW9KMkp2WkhrbktUdGNiaUFnSUNBZ0lDQWdZMjl1YzNRZ2NHRm5aU0E5SUdSdlkzVnRaVzUwTG5GMVpYSjVVMlZzWldOMGIzSW9KeTV3WVdkbEp5azdYRzRnSUNBZ0lDQWdJRVJ2YlM1a1pYUmxZM1FvWW05a2VTazdYRzRnSUNBZ0lDQWdJR0p2WkhrdVkyeGhjM05NYVhOMExtRmtaQ2duY21WaFpIa25LVHRjYmlBZ0lDQjlYRzVjYm4xY2JseHVkbUZ5SUdGd2NDQTlJRzVsZHlCQmNIQW9LVHRjYmx4dWQybHVaRzkzTG05dWJHOWhaQ0E5SUNncElEMCtJSHRjYmlBZ0lDQmhjSEF1YVc1cGRDZ3BPMXh1ZlRzaVhTd2labWxzWlNJNkltUnZZM012YW5NdmJXRnBiaTVxY3lKOVxuIl19